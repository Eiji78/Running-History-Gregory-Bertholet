<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Courbes de Progression - Running History</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Space+Grotesk:wght@300;400;500;600;700&family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --neon-cyan: #00fff9;
            --neon-purple: #bc13fe;
            --neon-orange: #ff6b35;
            --neon-pink: #ff006e;
            --dark-bg: #0a0a0f;
            --card-bg: rgba(15, 15, 25, 0.8);
        }
        
        body {
            font-family: 'Space Grotesk', sans-serif;
            background: #0a0a0f;
            color: white;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated Background */
        .animated-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            background: radial-gradient(ellipse at top, #1a0f2e 0%, #0a0a0f 50%);
        }

        .animated-bg::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(188, 19, 254, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(0, 255, 249, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(255, 107, 53, 0.1) 0%, transparent 50%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .grain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.03;
            z-index: 1;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* Neon Border Animation */
        .neon-border {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, 
                var(--neon-cyan) 0%, 
                var(--neon-purple) 25%,
                var(--neon-pink) 50%,
                var(--neon-orange) 75%,
                var(--neon-cyan) 100%);
            background-size: 200% 100%;
            animation: gradientSlide 4s linear infinite;
            z-index: 1000;
            box-shadow: 0 0 20px var(--neon-cyan), 0 0 40px var(--neon-purple);
        }

        @keyframes gradientSlide {
            0% { background-position: 0% 0%; }
            100% { background-position: 200% 0%; }
        }

        .main-title {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(2rem, 6vw, 4rem);
            font-weight: 900;
            background: linear-gradient(135deg, #00fff9 0%, #bc13fe 50%, #ff006e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 80px rgba(0, 255, 249, 0.5);
            letter-spacing: 0.1em;
            position: relative;
            animation: titleGlow 3s ease-in-out infinite;
            white-space: nowrap;
        }

        @keyframes titleGlow {
            0%, 100% { 
                filter: drop-shadow(0 0 20px rgba(0, 255, 249, 0.8)) 
                        drop-shadow(0 0 40px rgba(188, 19, 254, 0.6));
            }
            50% { 
                filter: drop-shadow(0 0 30px rgba(0, 255, 249, 1)) 
                        drop-shadow(0 0 60px rgba(188, 19, 254, 0.8));
            }
        }

        .glass-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            position: relative;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .glass-card:hover {
            border-color: rgba(0, 255, 249, 0.3);
            box-shadow: 0 20px 60px rgba(0, 255, 249, 0.2);
        }

        .back-btn {
            background: linear-gradient(135deg, rgba(0, 255, 249, 0.2), rgba(0, 200, 255, 0.3));
            backdrop-filter: blur(20px);
            border: 2px solid rgba(0, 255, 249, 0.5);
            color: var(--neon-cyan);
            padding: 0.75rem 1.75rem;
            border-radius: 12px;
            font-weight: 700;
            font-size: 0.9rem;
            letter-spacing: 0.08em;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            text-decoration: none;
            display: inline-block;
            box-shadow: 0 0 20px rgba(0, 255, 249, 0.3);
        }

        .back-btn:hover {
            transform: translateY(-3px);
            border-color: var(--neon-cyan);
            box-shadow: 0 10px 30px rgba(0, 255, 249, 0.5);
            background: linear-gradient(135deg, rgba(0, 255, 249, 0.3), rgba(0, 200, 255, 0.4));
        }

        .container {
            position: relative;
            z-index: 2;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .fade-in {
            animation: fadeIn 1s ease-out forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .main-title {
                font-size: 1.8rem;
                letter-spacing: 0.05em;
            }
        }
    </style>
</head>
<body>
    <div class="animated-bg"></div>
    <div class="grain"></div>
    <div class="neon-border"></div>

    <div class="container py-20">
        <div class="text-center mb-16 fade-in">
            <h1 class="main-title mb-8">COURBES DE PROGRESSION</h1>
            <a href="index.html" class="back-btn">
                ← RETOUR AU TABLEAU DE BORD
            </a>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <!-- Graphique VMA au fil du temps -->
            <div class="glass-card p-8 fade-in" style="animation-delay: 0.1s">
                <h3 class="text-xl font-bold mb-6 tracking-wider" style="color: var(--neon-cyan);">ÉVOLUTION VMA</h3>
                <canvas id="vmaChart" width="400" height="250"></canvas>
            </div>

            <!-- Graphique Pourcentage de classement -->
            <div class="glass-card p-8 fade-in" style="animation-delay: 0.2s">
                <h3 class="text-xl font-bold mb-6 tracking-wider" style="color: var(--neon-purple);">ÉVOLUTION CLASSEMENT (%)</h3>
                <canvas id="percentChart" width="400" height="250"></canvas>
            </div>
        </div>

        <div class="grid grid-cols-1 gap-8">
            <!-- Graphique Allure moyenne -->
            <div class="glass-card p-8 fade-in" style="animation-delay: 0.3s">
                <h3 class="text-xl font-bold mb-6 tracking-wider" style="color: var(--neon-orange);">ÉVOLUTION ALLURE (min/km)</h3>
                <canvas id="paceChart" width="400" height="200"></canvas>
            </div>
        </div>
    </div>

    <script>
        const racesData = [
            {date: "2025-05-10", course: "Sedan-Charleville", ville: "Sedan", dept: "08", km: "23.6", classement: "178/3365", indice: "5.29", perf: "01:38:50", tempsMoyenKm: "4:11"},
            {date: "2025-09-28", course: "Semi-Marathon - Route Du Vin", ville: "Luxembourg", dept: "0", km: "21.1", classement: "145/2499", indice: "5.8", perf: "01:23:48", tempsMoyenKm: "3:58", record: true},
            {date: "2025-05-31", course: "Ing Night Semi Marathon Luxembourg", ville: "Luxembourg", dept: "0", km: "21.1", classement: "181/8646", indice: "2.09", perf: "01:29:51", tempsMoyenKm: "4:14"},
            {date: "2025-04-27", course: "Marathon du lac d'Annecy", ville: "Annecy", dept: "74", km: "42.195", classement: "583/3845", indice: "15.16", perf: "03:26:08", tempsMoyenKm: "4:53"},
            {date: "2025-03-16", course: "Semi Marathon Intercommunal de la Vallée de l'Orne", ville: "Rosselange", dept: "57", km: "21.1", classement: "35/538", indice: "6.51", perf: "01:25:34", tempsMoyenKm: "4:03"},
            {date: "2024-06-10", course: "Sedan-Charleville", ville: "Sedan", dept: "08", km: "23.6", classement: "217/2734", indice: "7.94", perf: "01:40:51", tempsMoyenKm: "4:16"},
            {date: "2024-09-29", course: "Ing Semi Marathon - Route Du Vin", ville: "Remich", dept: "0", km: "21.1", classement: "178/1895", indice: "9.39", perf: "01:26:33", tempsMoyenKm: "4:06"},
            {date: "2024-08-25", course: "La Boussoise", ville: "Bousse", dept: "57", km: "11.8", classement: "59/433", indice: "13.63", perf: "01:00:59", tempsMoyenKm: "5:10"},
            {date: "2024-07-06", course: "Ronde Nocturne", ville: "Clouange", dept: "57", km: "10", classement: "20/161", indice: "12.42", perf: "00:38:18", tempsMoyenKm: "3:50"},
            {date: "2024-11-05", course: "Ing Night Semi Marathon Luxembourg", ville: "Luxembourg", dept: "0", km: "21.1", classement: "176/6909", indice: "2.55", perf: "01:31:20", tempsMoyenKm: "4:19"},
            {date: "2024-08-05", course: "Course du Muguet", ville: "Vitry-sur-Orne", dept: "57", km: "10", classement: "10/134", indice: "7.46", perf: "00:37:41", tempsMoyenKm: "3:46", record: true},
            {date: "2024-01-05", course: "La Conviviale", ville: "Rosselange", dept: "57", km: "10", classement: "14/199", indice: "7.04", perf: "00:39:17", tempsMoyenKm: "3:56"},
            {date: "2024-04-21", course: "Semi-Marathon de Thionville", ville: "Thionville", dept: "57", km: "21.1", classement: "80/1089", indice: "7.35", perf: "01:25:30", tempsMoyenKm: "4:03"},
            {date: "2024-07-04", course: "Schneider Electric Marathon De Paris", ville: "Paris", dept: "75", km: "42.195", classement: "3058/54175", indice: "5.64", perf: "03:06:21", tempsMoyenKm: "4:24", record: true},
            {date: "2024-03-17", course: "Semi-Marathon Intercommunal de la Vallée de l'Orne", ville: "Moyeuvre-Grande", dept: "57", km: "21.1", classement: "34/416", indice: "8.17", perf: "01:30:06", tempsMoyenKm: "4:16"},
            {date: "2024-10-03", course: "Postlaf", ville: "Luxembourg", dept: "0", km: "10", classement: "144/2440", indice: "5.9", perf: "00:40:29", tempsMoyenKm: "4:02"},
            {date: "2023-10-14", course: "Haard Trail Dudelange", ville: "Dudelange", dept: "0", km: "15", classement: "27/94", indice: "28.72", perf: "01:11:15", tempsMoyenKm: "4:45"},
            {date: "2023-01-10", course: "Sedan-Charleville", ville: "Sedan", dept: "08", km: "23.6", classement: "259/2171", indice: "11.93", perf: "01:48:54", tempsMoyenKm: "4:36"},
            {date: "2023-09-24", course: "Ing Semi Marathon - Route Du Vin", ville: "Remich", dept: "0", km: "21.1", classement: "179/1370", indice: "13.07", perf: "01:30:39", tempsMoyenKm: "4:17"},
            {date: "2023-09-07", course: "La Forestière", ville: "Moyeuvre-Grande", dept: "57", km: "10", classement: "39/164", indice: "23.78", perf: "00:50:30", tempsMoyenKm: "5:03"},
            {date: "2023-06-25", course: "Foulées de Saint-Hubert", ville: "Gandrange", dept: "57", km: "10", classement: "24/169", indice: "14.2", perf: "00:41:37", tempsMoyenKm: "4:10"},
            {date: "2023-02-06", course: "Ronde Nocturne", ville: "Clouange", dept: "57", km: "10", classement: "18/119", indice: "15.13", perf: "00:40:17", tempsMoyenKm: "4:02"},
            {date: "2023-05-20", course: "Ing Night Marathon Luxembourg", ville: "Luxembourg", dept: "0", km: "42.195", classement: "222/1046", indice: "21.22", perf: "03:47:13", tempsMoyenKm: "5:23"},
            {date: "2023-04-23", course: "Semi Marathon de Thionville", ville: "Thionville", dept: "57", km: "21.1", classement: "82/690", indice: "11.88", perf: "01:27:20", tempsMoyenKm: "4:08"},
            {date: "2023-03-19", course: "Semi Marathon Intercommunal de La Vallée de l'Orne", ville: "Rombas", dept: "57", km: "21.1", classement: "33/395", indice: "8.35", perf: "01:28:36", tempsMoyenKm: "4:12"},
            {date: "2023-12-03", course: "Postlaf", ville: "Luxembourg", dept: "0", km: "10", classement: "142/2067", indice: "6.87", perf: "00:42:44", tempsMoyenKm: "4:16"},
            {date: "2022-10-16", course: "Tcs Amsterdam Marathon", ville: "Amsterdam", dept: "0", km: "42.195", classement: "1630/12658", indice: "12.88", perf: "03:13:45", tempsMoyenKm: "4:35"},
            {date: "2022-09-18", course: "Semi-Marathon Fensch et Moselle", ville: "Uckange", dept: "57", km: "21.1", classement: "30/124", indice: "24.19", perf: "01:32:20", tempsMoyenKm: "4:23"},
            {date: "2022-06-26", course: "Foulées de Saint-Hubert", ville: "Gandrange", dept: "57", km: "10", classement: "21/147", indice: "14.29", perf: "00:41:27", tempsMoyenKm: "4:09"},
            {date: "2022-03-06", course: "Ronde Nocturne", ville: "Clouange", dept: "57", km: "10", classement: "28/100", indice: "28", perf: "00:40:05", tempsMoyenKm: "4:01"},
            {date: "2022-05-28", course: "Ing Night Semi Marathon Luxembourg", ville: "Luxembourg", dept: "0", km: "21.1", classement: "456/4498", indice: "10.14", perf: "01:37:46", tempsMoyenKm: "4:38"},
            {date: "2022-05-15", course: "Semi-Marathon de Thionville", ville: "Thionville", dept: "57", km: "21.1", classement: "289/798", indice: "36.22", perf: "01:51:28", tempsMoyenKm: "5:17"},
            {date: "2022-01-05", course: "La Conviviale", ville: "Rosselange", dept: "57", km: "10", classement: "21/136", indice: "15.44", perf: "00:40:34", tempsMoyenKm: "4:03"},
            {date: "2022-03-27", course: "Boucles de l'Acier", ville: "Florange", dept: "57", km: "10", classement: "77/325", indice: "23.69", perf: "00:40:16", tempsMoyenKm: "4:02"},
            {date: "2022-03-20", course: "Semi Marathon Intercommunal de la Vallée de l'Orne", ville: "Gandrange", dept: "57", km: "21.1", classement: "82/309", indice: "26.54", perf: "01:33:58", tempsMoyenKm: "4:27"},
            {date: "2021-10-17", course: "Schneider Electric Marathon de Paris", ville: "Paris", dept: "75", km: "42.195", classement: "4587/27071", indice: "16.94", perf: "03:29:02", tempsMoyenKm: "4:57"},
            {date: "2021-09-19", course: "Semi-Marathon du Val de Fensch", ville: "Uckange", dept: "57", km: "21.1", classement: "60/188", indice: "31.91", perf: "01:33:14", tempsMoyenKm: "4:25"},
            {date: "2021-04-07", course: "Boucles de l'Acier", ville: "Florange", dept: "57", km: "10", classement: "78/250", indice: "31.2", perf: "00:40:49", tempsMoyenKm: "4:05"},
            {date: "2020-12-24", course: "5Km Athlé - Open de France virtuel", ville: "Partout", dept: "75", km: "5", classement: "1666/11608", indice: "14.35", perf: "00:20:25", tempsMoyenKm: "4:05"},
            {date: "2020-07-14", course: "5km Athlé - Open de France Virtuel", ville: "Partout", dept: "56", km: "5", classement: "1413/7990", indice: "17.68", perf: "00:21:15", tempsMoyenKm: "4:15"},
            {date: "2020-01-03", course: "Semi Marathon Intercommunal de La Vallée de l'Orne", ville: "Vitry-Sur-Orne", dept: "57", km: "21.1", classement: "247/582", indice: "42.44", perf: "01:42:59", tempsMoyenKm: "4:53"},
            {date: "2019-03-11", course: "Course Marcel Kiefer", ville: "Hussigny-Godbrange", dept: "54", km: "21", classement: "41/102", indice: "40.2", perf: "01:52:47", tempsMoyenKm: "5:22"},
            {date: "2019-10-21", course: "Sedan-Charleville", ville: "Sedan", dept: "08", km: "23.6", classement: "2083/7623", indice: "27.33", perf: "01:59:38", tempsMoyenKm: "5:04"},
            {date: "2019-08-25", course: "La Boussoise", ville: "Bousse", dept: "57", km: "15", classement: "96/289", indice: "33.22", perf: "01:15:11", tempsMoyenKm: "5:01"},
            {date: "2019-06-30", course: "Les Foulées de Saint Hubert", ville: "Gandrange", dept: "57", km: "10", classement: "73/234", indice: "31.2", perf: "00:46:42", tempsMoyenKm: "4:40"},
            {date: "2019-07-06", course: "Ronde Nocturne", ville: "Clouange", dept: "57", km: "10", classement: "58/131", indice: "44.27", perf: "00:45:11", tempsMoyenKm: "4:31"},
            {date: "2019-01-06", course: "Ing Night Semi Marathon Luxembourg", ville: "Luxembourg", dept: "0", km: "21.1", classement: "1564/6470", indice: "24.17", perf: "01:55:51", tempsMoyenKm: "5:29"},
            {date: "2019-01-05", course: "La Conviviale", ville: "Rosselange", dept: "57", km: "10", classement: "121/248", indice: "48.79", perf: "00:49:03", tempsMoyenKm: "4:54"},
            {date: "2019-04-28", course: "Semi Marathon de Thionville", ville: "Thionville", dept: "57", km: "21.1", classement: "521/987", indice: "52.79", perf: "01:49:48", tempsMoyenKm: "5:12"},
            {date: "2019-03-17", course: "Semi-Marathon de La Vallée de l'Orne", ville: "Clouange", dept: "57", km: "21.1", classement: "314/456", indice: "68.86", perf: "01:53:04", tempsMoyenKm: "5:22"}
        ];

        function calculateRaceVMA(tempsMoyenKm) {
            const parts = tempsMoyenKm.split(':');
            if (parts.length !== 2) return 'N/A';
            const minutes = parseInt(parts[0]);
            const seconds = parseInt(parts[1]);
            if (isNaN(minutes) || isNaN(seconds)) return 'N/A';
            const totalMinutes = minutes + (seconds / 60);
            const vma = 60 / totalMinutes;
            return vma.toFixed(2);
        }

        function calculatePercentage(classement) {
            const parts = classement.split('/');
            if (parts.length !== 2) return 'N/A';
            const position = parseInt(parts[0]);
            const total = parseInt(parts[1]);
            if (isNaN(position) || isNaN(total) || total === 0) return 'N/A';
            return ((position / total) * 100).toFixed(1) + '%';
        }

        function createCharts() {
            const sortedRaces = [...racesData].sort((a, b) => new Date(a.date) - new Date(b.date));
            
            const labels = sortedRaces.map(r => r.date);
            const vmaData = sortedRaces.map(r => parseFloat(calculateRaceVMA(r.tempsMoyenKm)));
            const percentData = sortedRaces.map(r => {
                const perc = calculatePercentage(r.classement);
                return perc === 'N/A' ? null : parseFloat(perc);
            });
            const paceData = sortedRaces.map(r => {
                const [min, sec] = r.tempsMoyenKm.split(':');
                return parseInt(min) + (parseInt(sec) / 60);
            });

            const avgVMA = vmaData.reduce((a, b) => a + b, 0) / vmaData.length;
            const avgPercent = percentData.filter(p => p !== null).reduce((a, b) => a + b, 0) / percentData.filter(p => p !== null).length;
            const avgPace = paceData.reduce((a, b) => a + b, 0) / paceData.length;

            function calculateTrendLine(data) {
                const n = data.length;
                let sumX = 0, sumY = 0, sumXY = 0, sumX2 = 0;
                
                data.forEach((y, x) => {
                    if (y !== null) {
                        sumX += x;
                        sumY += y;
                        sumXY += x * y;
                        sumX2 += x * x;
                    }
                });
                
                const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
                const intercept = (sumY - slope * sumX) / n;
                
                return data.map((_, i) => slope * i + intercept);
            }

            const vmaTrend = calculateTrendLine(vmaData);
            const percentTrend = calculateTrendLine(percentData.map(p => p === null ? 0 : p));
            const paceTrend = calculateTrendLine(paceData);

            const vmaAvgLine = new Array(labels.length).fill(avgVMA);
            const percentAvgLine = new Array(labels.length).fill(avgPercent);
            const paceAvgLine = new Array(labels.length).fill(avgPace);

            const commonOptions = {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        display: true,
                        labels: {
                            color: 'rgba(255, 255, 255, 0.8)',
                            font: {
                                size: 12,
                                family: "'Space Grotesk', sans-serif"
                            },
                            boxWidth: 15,
                            padding: 15
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(10, 10, 15, 0.9)',
                        titleColor: '#00fff9',
                        bodyColor: '#ffffff',
                        borderColor: '#00fff9',
                        borderWidth: 1,
                        padding: 12,
                        displayColors: false,
                        callbacks: {
                            title: function(context) {
                                const index = context[0].dataIndex;
                                return sortedRaces[index].course;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        ticks: {
                            color: 'rgba(255, 255, 255, 0.5)',
                            maxRotation: 45,
                            minRotation: 45
                        },
                        grid: {
                            color: 'rgba(255, 255, 255, 0.05)'
                        }
                    },
                    y: {
                        ticks: {
                            color: 'rgba(255, 255, 255, 0.5)'
                        },
                        grid: {
                            color: 'rgba(255, 255, 255, 0.05)'
                        }
                    }
                }
            };

            const vmaCtx = document.getElementById('vmaChart').getContext('2d');
            new Chart(vmaCtx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'VMA (km/h)',
                        data: vmaData,
                        borderColor: '#00fff9',
                        backgroundColor: 'rgba(0, 255, 249, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 4,
                        pointBackgroundColor: '#00fff9',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointHoverRadius: 6,
                        order: 1
                    }, {
                        label: 'Moyenne (' + avgVMA.toFixed(2) + ' km/h)',
                        data: vmaAvgLine,
                        borderColor: 'rgba(255, 215, 0, 0.8)',
                        borderWidth: 2,
                        borderDash: [10, 5],
                        pointRadius: 0,
                        fill: false,
                        tension: 0,
                        order: 2
                    }, {
                        label: 'Tendance',
                        data: vmaTrend,
                        borderColor: 'rgba(0, 255, 136, 0.8)',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        pointRadius: 0,
                        fill: false,
                        tension: 0,
                        order: 3
                    }]
                },
                options: commonOptions
            });

            const percentCtx = document.getElementById('percentChart').getContext('2d');
            new Chart(percentCtx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Classement (%)',
                        data: percentData,
                        borderColor: '#bc13fe',
                        backgroundColor: 'rgba(188, 19, 254, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 4,
                        pointBackgroundColor: '#bc13fe',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointHoverRadius: 6,
                        order: 1
                    }, {
                        label: 'Moyenne (' + avgPercent.toFixed(1) + '%)',
                        data: percentAvgLine,
                        borderColor: 'rgba(255, 215, 0, 0.8)',
                        borderWidth: 2,
                        borderDash: [10, 5],
                        pointRadius: 0,
                        fill: false,
                        tension: 0,
                        order: 2
                    }, {
                        label: 'Tendance',
                        data: percentTrend,
                        borderColor: 'rgba(0, 255, 136, 0.8)',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        pointRadius: 0,
                        fill: false,
                        tension: 0,
                        order: 3
                    }]
                },
                options: {
                    ...commonOptions,
                    scales: {
                        ...commonOptions.scales,
                        y: {
                            ...commonOptions.scales.y,
                            reverse: true
                        }
                    }
                }
            });

            const paceCtx = document.getElementById('paceChart').getContext('2d');
            const avgPaceMin = Math.floor(avgPace);
            const avgPaceSec = Math.round((avgPace - avgPaceMin) * 60);
            new Chart(paceCtx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Allure (min/km)',
                        data: paceData,
                        borderColor: '#ff6b35',
                        backgroundColor: 'rgba(255, 107, 53, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 4,
                        pointBackgroundColor: '#ff6b35',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointHoverRadius: 6,
                        order: 1
                    }, {
                        label: 'Moyenne (' + avgPaceMin + ':' + String(avgPaceSec).padStart(2, '0') + ' /km)',
                        data: paceAvgLine,
                        borderColor: 'rgba(255, 215, 0, 0.8)',
                        borderWidth: 2,
                        borderDash: [10, 5],
                        pointRadius: 0,
                        fill: false,
                        tension: 0,
                        order: 2
                    }, {
                        label: 'Tendance',
                        data: paceTrend,
                        borderColor: 'rgba(0, 255, 136, 0.8)',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        pointRadius: 0,
                        fill: false,
                        tension: 0,
                        order: 3
                    }]
                },
                options: {
                    ...commonOptions,
                    scales: {
                        ...commonOptions.scales,
                        y: {
                            ...commonOptions.scales.y,
                            reverse: true,
                            ticks: {
                                ...commonOptions.scales.y.ticks,
                                callback: function(value) {
                                    const min = Math.floor(value);
                                    const sec = Math.round((value - min) * 60);
                                    return min + ':' + String(sec).padStart(2, '0');
                                }
                            }
                        }
                    },
                    plugins: {
                        ...commonOptions.plugins,
                        tooltip: {
                            ...commonOptions.plugins.tooltip,
                            callbacks: {
                                ...commonOptions.plugins.tooltip.callbacks,
                                label: function(context) {
                                    const value = context.parsed.y;
                                    const min = Math.floor(value);
                                    const sec = Math.round((value - min) * 60);
                                    return 'Allure: ' + min + ':' + String(sec).padStart(2, '0') + ' /km';
                                }
                            }
                        }
                    }
                }
            });
        }

        createCharts();
    </script>
</body>
</html>